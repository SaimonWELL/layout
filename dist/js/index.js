function isBackdropFilterSupported(){return CSS.supports("backdrop-filter","blur(5px)")||CSS.supports("-webkit-backdrop-filter","blur(5px)")}document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".backdrop-blur");isBackdropFilterSupported()||e.forEach((function(e){e.classList.remove("backdrop-blur"),e.classList.add("no-backdrop-filter")}))}));const e=document.getElementById("signup-button"),t=document.getElementById("popup"),n=document.getElementById("close-button"),o=document.getElementById("signup-form"),d=document.getElementById("thank-you"),s=document.getElementsByTagName("body");function i(e,t){const n=document.getElementById(`${e}-error`),o=document.getElementById(e),d=document.getElementById(`${e}-error-icon`);n&&o&&d&&(n.textContent=t,o.classList.add("error"),o.parentElement.classList.add("error"),d.style.visibility="visible")}function r(e){const t=document.getElementById(`${e}-error`),n=document.getElementById(e),o=document.getElementById(`${e}-error-icon`);t&&n&&o&&(t.textContent="",n.classList.remove("error"),n.parentElement.classList.remove("error"),o.style.visibility="hidden")}function a(e){e&&(localStorage.setItem("authToken",e),window.location.href=`https://www.dating.com/people/#token=${e}`)}e.addEventListener("click",(()=>{t.classList.remove("hidden"),s[0].style.overflow="hidden"})),n.addEventListener("click",(()=>{t.classList.add("hidden"),s[0].style.overflow="visible"})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&(t.classList.add("hidden"),s[0].style.overflow="visible")})),o.addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("password").value;let s=!0;if(!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(t)?(i("email","Please enter a valid e-mail"),s=!1):r("email"),n.length<8?(i("password","Password must be at least 8 characters"),s=!1):r("password"),!s)return;o.classList.add("hidden"),d.classList.remove("hidden");const l=await fetch("https://api.dating.com/identity",{method:"GET",headers:{Authorization:"Basic "+btoa(`${t}:${n}`)}});if(l.ok){return void a(l.headers.get("X-Token"))}const c=await fetch("https://api.dating.com/identity",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})});if(c.ok){const e=c.headers.get("X-Token");d.classList.remove("hidden"),o.classList.add("hidden"),setTimeout((()=>{a(e)}),2e3)}else i("form","Registration failed")})),window.addEventListener("load",(()=>{const e=localStorage.getItem("authToken");e&&a(e)}))}));